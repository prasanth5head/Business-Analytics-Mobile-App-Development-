{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prasa\\\\OneDrive\\\\Documents\\\\Bussiness\\\\frontend\\\\src\\\\context\\\\MarketContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MarketContext = /*#__PURE__*/createContext();\nexport const MarketProvider = ({\n  children\n}) => {\n  _s();\n  const [marketData, setMarketData] = useState(null);\n  const [aiRecommendations, setAiRecommendations] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const {\n        data\n      } = await axios.get('http://localhost:5000/api/market/data');\n      setMarketData(data);\n\n      // Get AI recommendations based on the new market data\n      const {\n        data: aiData\n      } = await axios.post('http://localhost:5000/api/market/recommendations', {\n        salesData: data.salesData,\n        productData: data.productData,\n        summary: data.summary\n      });\n      setAiRecommendations(aiData);\n      setLoading(false);\n    } catch (err) {\n      console.error('Fetch error:', err);\n      setError('Failed to fetch real-time market data');\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchData();\n    // Set up an interval to refresh data every 5 minutes\n    const interval = setInterval(fetchData, 300000);\n    return () => clearInterval(interval);\n  }, [fetchData]);\n  const addRevenue = async (amount, month) => {\n    try {\n      await axios.post('http://localhost:5000/api/market/revenue', {\n        amount,\n        month\n      });\n      await fetchData(); // Refresh data after adding\n      return {\n        success: true\n      };\n    } catch (err) {\n      console.error('Add revenue error:', err);\n      return {\n        success: false,\n        error: 'Failed to add revenue'\n      };\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(MarketContext.Provider, {\n    value: {\n      marketData,\n      aiRecommendations,\n      loading,\n      error,\n      refreshData: fetchData,\n      addRevenue\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(MarketProvider, \"ZeH5viKK2z9u3Dkf8UxIqnTWBUw=\");\n_c = MarketProvider;\nexport const useMarket = () => {\n  _s2();\n  return useContext(MarketContext);\n};\n_s2(useMarket, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"MarketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","axios","jsxDEV","_jsxDEV","MarketContext","MarketProvider","children","_s","marketData","setMarketData","aiRecommendations","setAiRecommendations","loading","setLoading","error","setError","fetchData","data","get","aiData","post","salesData","productData","summary","err","console","interval","setInterval","clearInterval","addRevenue","amount","month","success","Provider","value","refreshData","fileName","_jsxFileName","lineNumber","columnNumber","_c","useMarket","_s2","$RefreshReg$"],"sources":["C:/Users/prasa/OneDrive/Documents/Bussiness/frontend/src/context/MarketContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst MarketContext = createContext();\r\n\r\nexport const MarketProvider = ({ children }) => {\r\n    const [marketData, setMarketData] = useState(null);\r\n    const [aiRecommendations, setAiRecommendations] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const { data } = await axios.get('http://localhost:5000/api/market/data');\r\n            setMarketData(data);\r\n\r\n            // Get AI recommendations based on the new market data\r\n            const { data: aiData } = await axios.post('http://localhost:5000/api/market/recommendations', {\r\n                salesData: data.salesData,\r\n                productData: data.productData,\r\n                summary: data.summary\r\n            });\r\n            setAiRecommendations(aiData);\r\n            setLoading(false);\r\n        } catch (err) {\r\n            console.error('Fetch error:', err);\r\n            setError('Failed to fetch real-time market data');\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        // Set up an interval to refresh data every 5 minutes\r\n        const interval = setInterval(fetchData, 300000);\r\n        return () => clearInterval(interval);\r\n    }, [fetchData]);\r\n\r\n    const addRevenue = async (amount, month) => {\r\n        try {\r\n            await axios.post('http://localhost:5000/api/market/revenue', { amount, month });\r\n            await fetchData(); // Refresh data after adding\r\n            return { success: true };\r\n        } catch (err) {\r\n            console.error('Add revenue error:', err);\r\n            return { success: false, error: 'Failed to add revenue' };\r\n        }\r\n    };\r\n\r\n    return (\r\n        <MarketContext.Provider value={{ marketData, aiRecommendations, loading, error, refreshData: fetchData, addRevenue }}>\r\n            {children}\r\n        </MarketContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useMarket = () => useContext(MarketContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}